# 专属VPN搭建

要基于 VPS 搭建个人 VPN，推荐用 WireGuard，因为它轻量、高效、安全，且配置简单。
下面是一个从零开始的基础教程。

## 1. 准备工作

- 有一台干净的 VPS（比如 Ubuntu 20.04 或更高）


## 2. 安装 WireGuard
在 VPS 上执行：
```bash
curl -O https://raw.githubusercontent.com/angristan/wireguard-install/master/wireguard-install.sh
chmod +x wireguard-install.sh
sudo ./wireguard-install.sh
```

**注意**: 服务端口默认值是：51820，请修改这个值。

在安装过程中，大部分情况是填默认值，除了还需输入Client名称，这个指的是连接该VPN的设备名称，比如"My-iPhone"。

最后，会得到一个控制台二维码，但是用手机扫描基本不能成功，需要把它保存为图片。

**二维码图片**

```
qrencode -o client.png -t png < client.conf
```
其中“client.conf”即你填写的客户端名称，比如“wg0-client-My-iPhone.conf”。

**图片转BASE64**
```
base64 client.png > client_base64.txt
```
将最终txt文件中的字符串复制出来，解码BASE64，即可得到我们所需的二维码图片。

比如用 cat命令将txt内容输出，然后将其复制到word进行适当处理，将换行符替换掉。

**BASE64展示**

如果对互联网上的BASE64解码不放心，你可以用PowerShell进行处理。
```
# 假设 base64 字符串保存在变量 $base64String
$base64String = "这里粘贴BASE64字符串"

# 解码成字节数组
[byte[]]$bytes = [Convert]::FromBase64String($base64String)

# 保存成图片文件
$outputFile = "client.png"
[IO.File]::WriteAllBytes($outputFile, $bytes)

# 打开图片
Start-Process $outputFile
```

## 3. 安装 WireGuard App

用手机下载WireGuard App（一条红色龙）扫描上述二维码图片即可连接VPN。

每当增加一个设备，都需要重复第2步骤，得到新的二维码图片，供新设备扫描。


## 4.一点点启发

购买一个VPS主机，选一个一般配置，月费至多100元人民币，估计可以同时支持10~100个客户端，
或许这就是为何很多人在搞VPN生意？但是一个IP如果有很多人访问，可能就会被万里长城阻挡。
如果只是家庭使用，那么我认为是没问题的。

**提示：你的VPS主机必须能在国内访问，且能畅通访问境外网站，否则一切白搭！**
